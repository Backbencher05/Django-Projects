<!DOCTYPE html>
{%extends 'blog/base.html'%}
{% block title_block%} ADITYA's BLOG HOME PAGE {%endblock%}

{%block content%}
    <h1>All Published Social Media Posts </h1>
    <!-- Search Functionality -->
    <div class="container" align="'center">
    <h4>Search Post between 2 Dates</h4>
    <form method="post">
        {{ form.as_p }}
        {%csrf_token%}
    From: <input type="date" name="fromdate">
    To: <input type="date" name="todate">
    <a href="/search"><input type="submit" class="btn btn-primary btn-lg" value="Search"></a>
    </form>
</div>
    <hr>

    {%if tag%}
    <h2>Post Tagged with '{{tag.name}}'</h2>
    {%endif%}
    
    {% for post in post_list%}
        <a href="{{post.get_absolute_url}}"><h2>{{post.title}}</h2></a>
        <p id="date">Published on {{post.publish}} by {{post.author}}</p>
        
        <p>Tags: 
            {%for tag in post.tags.all%}
                <a href="{%url 'post_list_by_tag_name' tag.slug%}" class="btn btn-success">{{tag.name}}</a>
            {%endfor%}
            <!-- {{post.tags.all | join:', '}} -->
        </p>
        {{post.body| truncatewords:30|linebreaks}}
    {%endfor%}
    <!-- Apply/Add Pagination  -->
    {%include 'blog/pagination.html' with page=post_list%}
    
    <!-- for CBV -->
    <!-- {%include 'blog/pagination.html' with page=page_obj%} -->
{%endblock%}